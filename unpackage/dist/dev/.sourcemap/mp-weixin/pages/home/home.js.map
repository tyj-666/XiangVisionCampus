{"version":3,"file":"home.js","sources":["pages/home/home.vue","../../../../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaG9tZS9ob21lLnZ1ZQ"],"sourcesContent":["<template>\n\t<view class=\"search-container\">\n\t\t<!-- 搜索区域 -->\n\t\t<view class=\"search-bar\">\n\t\t\t<up-icon name=\"search\" @click=\"clearSearch\" size=\"20px\" style=\"margin-right: 10rpx\"></up-icon>\n\t\t\t<input class=\"search-input\" type=\"text\" placeholder=\"请输入学校名称\" v-model=\"searchText\" confirm-type=\"search\" />\n\n\t\t\t<up-icon name=\"close\" v-if=\"searchText\" @click=\"clearSearch\" size=\"20px\" style=\"margin-right: 10rpx\"></up-icon>\n\t\t</view>\n\n\t\t<!-- 筛选区域 -->\n\t\t<view class=\"filter-row\">\n\t\t\t<picker mode=\"selector\" :range=\"cityData\" range-key=\"name\" @change=\"handleCityChange\" :value=\"cityIndex\">\n\t\t\t\t<view class=\"filter-picker\">\n\t\t\t\t\t{{ selectedCity || '选择城市' }}\n\t\t\t\t\t<up-icon name=\"arrow-down\" @click=\"clearSearch\" size=\"18px\" style=\"margin-left: 10rpx\"></up-icon>\n\t\t\t\t</view>\n\t\t\t</picker>\n\t\t</view>\n\n\t\t<!-- 学校列表 -->\n\t\t<view class=\"university-grid\">\n\t\t\t<view class=\"university-card\" v-for=\"item in filteredList\" :key=\"item.schoolId\" @click=\"handleUniversityClick(item)\">\n\t\t\t\t<view class=\"image-container\">\n\t\t\t\t\t<image :src=\"item.schoolImage\" lazy-load mode=\"aspectFill\" class=\"university-image\" />\n\t\t\t\t</view>\n\t\t\t\t<view class=\"university-name\">{{ item.schoolName }}</view>\n\t\t\t\t<view class=\"university-info\">\n\t\t\t\t\t<view class=\"location\">{{ item.schoolLocation }}</view>\n\t\t\t\t\t<view class=\"label-container\">\n\t\t\t\t\t\t<view\n\t\t\t\t\t\t\tclass=\"label-tag\"\n\t\t\t\t\t\t\tv-for=\"(tag, tagIndex) in item.schoolTag\"\n\t\t\t\t\t\t\t:key=\"tagIndex\"\n\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t'tag-211': tag === '211',\n\t\t\t\t\t\t\t\t'tag-985': tag === '985',\n\t\t\t\t\t\t\t\t'tag-double': tag === '双一流'\n\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ tag }}\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<view class=\"no-result\" v-if=\"filteredList.length === 0\">\n\t\t\t\t<up-icon name=\"error-circle\" @click=\"clearSearch\" size=\"50px\" style=\"margin-bottom: 20rpx;margin-top: 100rpx;line-height: 50vh;\"></up-icon>\n\t\t\t\t<text>暂无搜索结果</text>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue';\nimport { getSchoolDetail } from '../../api/api.js';\nimport { onLoad } from '@dcloudio/uni-app';\n\n// 搜索文本\nconst searchText = ref('');\n\n// 城市数据\nconst cityData = ref([{ name: '全部城市' }, { name: '湖南省长沙市' }, { name: '湖南省衡阳市' }, { name: '湖南省湘潭市' }, { name: '湖南省株洲市' }]);\n\n// 当前选中的城市索引\nconst cityIndex = ref(0);\n// 选中的城市\nconst selectedCity = ref('');\n// 原始大学列表\nconst universityList = ref([]);\n\n// 生命周期：加载数据\nonLoad(() => {\n\tgetSchoolDetail().then((res) => {\n\t\tconsole.log('所有学校数据：', res.data);\n\t\tuniversityList.value = res.data;\n\t});\n});\n\n// 过滤后的列表\nconst filteredList = computed(() => {\n\treturn universityList.value.filter((item) => {\n\t\t// 匹配搜索文本（使用schoolName字段）\n\t\tconst nameMatch = item.schoolName.includes(searchText.value);\n\t\t// 匹配城市（使用schoolLocation字段）\n\t\tconst cityMatch = !selectedCity.value || selectedCity.value === '全部城市' || item.schoolLocation === selectedCity.value;\n\n\t\treturn nameMatch && cityMatch;\n\t});\n});\r\n\n\n// 处理城市选择变化\nconst handleCityChange = (e) => {\n\tcityIndex.value = e.detail.value;\n\tselectedCity.value = cityIndex.value === 0 ? '' : cityData.value[cityIndex.value].name;\n};\n\n// 清空搜索\nconst clearSearch = () => {\n\tsearchText.value = '';\n};\n\n// 点击学校卡片跳转到详情页\nconst handleUniversityClick = (item) => {\n\tuni.navigateTo({\n\t\turl: `/pages/schoolDetail/schoolDetail?schoolId=${item.schoolId}`\n\t});\n\tconsole.log('点击的学校 ID:', item.schoolId, '跳转到学校详情页面成功');\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.search-container {\n\tpadding: 20rpx;\n\tbackground-color: #f5f5f5;\n\tmin-height: 100vh;\r\n\t\r\n\t.search-bar {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 20rpx;\r\n\t\tpadding: 10rpx 20rpx;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);\r\n\t\r\n\t\t.search-input {\r\n\t\t\tflex: 1;\r\n\t\t\theight: 60rpx;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tcolor: #333;\r\n\t\t}\r\n\t\r\n\t}\n}\n\n\n\n.filter-row {\n\tmargin-bottom: 20rpx;\n}\n\n.filter-picker {\n\tbackground-color: #fff;\n\tborder-radius: 20rpx;\n\tpadding: 16rpx 30rpx;\n\tfont-size: 28rpx;\n\tcolor: #333;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);\n\n}\n\n.university-grid {\n\tdisplay: grid;\n\tgrid-template-columns: repeat(2, 1fr);\n\tgap: 20rpx;\n}\n\n.university-card {\n\tbackground-color: #fff;\n\tborder-radius: 20rpx;\n\toverflow: hidden;\n\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);\n\n\t.image-container {\n\t\theight: 200rpx;\n\t\twidth: 100%;\n\t\tposition: relative;\n\t\toverflow: hidden;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tbackground-color: #f8f8f8;\n\n\t\t.university-image {\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tdisplay: block;\n\n\t\t\t::v-deep image {\n\t\t\t\tmin-width: 100%;\n\t\t\t\tmin-height: 100%;\n\t\t\t\twidth: auto;\n\t\t\t\theight: auto;\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 50%;\n\t\t\t\tleft: 50%;\n\t\t\t\ttransform: translate(-50%, -50%) scale(1.1);\n\t\t\t\tobject-fit: cover;\n\t\t\t}\n\t\t}\n\t}\n\n\t.university-name {\n\t\tfont-size: 28rpx;\n\t\tfont-weight: bold;\n\t\tcolor: #333;\n\t\tpadding: 15rpx 0 0 15rpx;\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n\n\t.university-info {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tpadding: 15rpx;\n\n\t\t.location {\n\t\t\tfont-size: 24rpx;\n\t\t\tcolor: #666;\n\t\t\tmargin-bottom: 10rpx;\n\t\t}\n\n\t\t.label-container {\n\t\t\tdisplay: flex;\n\t\t\tflex-wrap: wrap;\r\n\t\t\tmargin-bottom: 10rpx;\n\t\t\tgap: 6rpx;\n\n\t\t\t.label-tag {\n\t\t\t\tfont-size: 20rpx;\n\t\t\t\tpadding: 2rpx 10rpx;\n\t\t\t\tborder-radius: 6rpx;\n\t\t\t\twhite-space: nowrap;\r\n\t\t\t\t// color: #fff;\n\t\t\t\t// background-color: #909399; // 默认颜色\r\n\t\t\t\tbackground-color: #f0f0f0;\r\n\t\t\t\tcolor: #666;\n\n\t\t\t\t&.tag-211 {\n\t\t\t\t\tbackground-color: #c8f3f5; // 211标签颜色\n\t\t\t\t}\n\n\t\t\t\t&.tag-985 {\n\t\t\t\t\tbackground-color: #ffccc2; // 985标签颜色\n\t\t\t\t}\n\n\t\t\t\t&.tag-double {\n\t\t\t\t\tbackground-color: #b6f1bb; // 双一流标签颜色\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n.no-result {\n\tgrid-column: 1 / -1;\n\ttext-align: center;\n\tfont-size: 28rpx;\n\tcolor: #999;\n\tpadding: 40rpx 0;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\n}\n</style>\n","import MiniProgramPage from 'D:/文档和照片/作业/大三下作业/集中实习/XiangVisionCampus/pages/home/home.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onLoad","getSchoolDetail","uni","computed"],"mappings":";;;;;;;;;;;;;;AA4DA,UAAM,aAAaA,cAAAA,IAAI,EAAE;AAGzB,UAAM,WAAWA,cAAAA,IAAI,CAAC,EAAE,MAAM,OAAM,GAAI,EAAE,MAAM,YAAY,EAAE,MAAM,SAAU,GAAE,EAAE,MAAM,SAAQ,GAAI,EAAE,MAAM,SAAU,CAAA,CAAC;AAGvH,UAAM,YAAYA,cAAAA,IAAI,CAAC;AAEvB,UAAM,eAAeA,cAAAA,IAAI,EAAE;AAE3B,UAAM,iBAAiBA,cAAAA,IAAI,CAAA,CAAE;AAG7BC,kBAAAA,OAAO,MAAM;AACZC,8BAAiB,EAAC,KAAK,CAAC,QAAQ;AAC/BC,sEAAY,WAAW,IAAI,IAAI;AAC/B,uBAAe,QAAQ,IAAI;AAAA,MAC7B,CAAE;AAAA,IACF,CAAC;AAGD,UAAM,eAAeC,cAAQ,SAAC,MAAM;AACnC,aAAO,eAAe,MAAM,OAAO,CAAC,SAAS;AAE5C,cAAM,YAAY,KAAK,WAAW,SAAS,WAAW,KAAK;AAE3D,cAAM,YAAY,CAAC,aAAa,SAAS,aAAa,UAAU,UAAU,KAAK,mBAAmB,aAAa;AAE/G,eAAO,aAAa;AAAA,MACtB,CAAE;AAAA,IACF,CAAC;AAID,UAAM,mBAAmB,CAAC,MAAM;AAC/B,gBAAU,QAAQ,EAAE,OAAO;AAC3B,mBAAa,QAAQ,UAAU,UAAU,IAAI,KAAK,SAAS,MAAM,UAAU,KAAK,EAAE;AAAA,IACnF;AAGA,UAAM,cAAc,MAAM;AACzB,iBAAW,QAAQ;AAAA,IACpB;AAGA,UAAM,wBAAwB,CAAC,SAAS;AACvCD,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,6CAA6C,KAAK,QAAQ;AAAA,MACjE,CAAE;AACDA,qEAAY,aAAa,KAAK,UAAU,aAAa;AAAA,IACtD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7GA,GAAG,WAAW,eAAe;"}