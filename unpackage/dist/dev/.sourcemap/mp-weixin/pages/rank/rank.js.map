{"version":3,"file":"rank.js","sources":["pages/rank/rank.vue","../../../../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcmFuay9yYW5rLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"page\">\n    <!-- È°µÈù¢Â§¥ÈÉ® -->\n    <view class=\"header\">\n      <view class=\"title\">\n        <text class=\"title-text\">ÊπñÂçóÈ´òÊ†°ÊéíË°åÊ¶ú</text>\n      </view>\n    </view>\n\n    <!-- ÊéíË°åÊ¶ú -->\n    <view class=\"ranking-list\">\n      <view\n        class=\"ranking-item\"\n        v-for=\"(item, index) in rankings\"\n        :key=\"item.id\"\n        :class=\"[\n          'ranking-card', \n          `rank-${index + 1}`, \n          { \n            'card-selected': selectedIndex === index,\n            'animate-in': shouldAnimate\n          }\n        ]\"\n        :style=\"shouldAnimate ? { '--delay': `${index * 0.1}s` } : {}\"\n        @click=\"selectCard(index)\"\n      >\n        <view class=\"rank\">\n          <view v-if=\"index < 3\" :class=\"['rank-icon', { gold: index === 0, silver: index === 1, bronze: index === 2 }]\">\n            <text class=\"rank-text\">{{ index + 1 }}</text>\n          </view>\n          <text v-else class=\"rank-text\">{{ index + 1 }}</text>\n        </view>\n        <view class=\"rank-info\">\n          <image :src=\"item.schoolLogo\" class=\"rank-image\" />\n          <text class=\"rank-name\">{{ item.schoolName }}</text>\n        </view>\n        <view class=\"rank-actions\">\n          <view class=\"like-section\" @tap.stop=\"likeSchool(index)\">\n            <text class=\"like-icon\" :class=\"{ 'like-animation': item.likeAnimating }\">üëç</text>\n            <text class=\"like-count\">{{ item.likes }}w</text>\n          </view>\n          <view class=\"more-options\" @click=\"handleUniversityClick(item)\">...</view>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, computed, reactive, nextTick, toRefs } from 'vue';\nimport { getSchoolRank } from '../../api/api.js';\nimport { onShow } from '@dcloudio/uni-app';\n\nconst state = reactive({\n  rawRankings: [],\n  selectedIndex: -1,\n  lastLikedIndex: -1,\n  shouldAnimate: false\n});\n\nconst rankings = computed(() => {\n  return [...state.rawRankings].sort((a, b) => b.likes - a.likes);\n});\n\nconst { rawRankings, selectedIndex, lastLikedIndex, shouldAnimate } = toRefs(state);\n\nonShow(() => {\n  // ÈáçÁΩÆÂä®ÁîªÁä∂ÊÄÅ\n  state.shouldAnimate = false;\n  \n  getSchoolRank().then((res) => {\n    state.rawRankings = res.data.map((item, index) => ({\n      ...item,\n      id: item.id || index,\n      likeAnimating: false,\n    }));\n    \n    // Êï∞ÊçÆÂä†ËΩΩÂÆåÊàêÂêéÂêØÁî®Âä®Áîª\n    nextTick(() => {\n      state.shouldAnimate = true;\n    });\n  });\n});\n\nconst likeSchool = (index) => {\n  const school = state.rawRankings.find(item => item.id === rankings.value[index].id);\n  if (school) {\n    state.lastLikedIndex = index;\n    school.likes += 1;\n    school.likeAnimating = true;\n    setTimeout(() => {\n      school.likeAnimating = false;\n    }, 500);\n  }\n};\n\nconst selectCard = (index) => {\n  state.selectedIndex = state.selectedIndex === index ? -1 : index;\n};\n\nconst handleUniversityClick = (item) => {\n  uni.navigateTo({\n    url: `/pages/schoolDetail/schoolDetail?schoolId=${item.schoolId}`\n  });\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.page {\n  background: #f7f7f7;\n  color: #333;\n\n  .header {\n    display: flex;\n    height: 10vh;\n    justify-content: space-between;\n    align-items: center;\n    background: linear-gradient(135deg, #6a2c88, #ff64b7);\n    padding: 30rpx;\n    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\n\n    .title {\n      text-align: center;\n      flex: 1;\n    }\n\n    .title-text {\n      font-size: 25px;\n      font-weight: bold;\n      color: #fff;\n      text-align: center;\n    }\n  }\n}\n\n.ranking-list {\n  padding: 20rpx;\n  display: flex;\n  flex-direction: column;\n  gap: 20rpx;\n\n  .ranking-card {\n    display: flex;\n    align-items: center;\n    padding: 25rpx;\n    background: #fff;\n    border-radius: 20rpx;\n    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);\n    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);\n    position: relative;\n    overflow: hidden;\n    opacity: 0;\n    \n    &.animate-in {\n      animation: slideIn 0.5s ease forwards;\n      animation-delay: var(--delay, 0s);\n    }\n\n    &.card-selected {\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5), 0 10px 10px rgba(0, 0, 0, 0.3);\n      transform: translateY(-2px) scale(1.01);\n      background: #f9f9f9;\n\n      &::before {\n        content: '';\n        position: absolute;\n        left: 0;\n        top: 0;\n        height: 100%;\n        width: 5rpx;\n        background: linear-gradient(to bottom, #6a2c88, #ff64b7);\n      }\n    }\n\n    &:hover {\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);\n      transform: translateY(-2px);\n    }\n  }\n\n  .rank {\n    display: flex;\n    align-items: center;\n    width: 85rpx;\n    justify-content: center;\n    margin-right: 10rpx;\n\n    .rank-icon {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      width: 60rpx;\n      height: 60rpx;\n      border-radius: 50%;\n      color: #fff;\n      font-weight: bold;\n      font-size: 15px;\n      position: relative;\n    }\n\n    .rank-text {\n      font-size: 40rpx;\n      font-weight: bold;\n      color: gold;\n    }\n  }\n\n  .rank-info {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    flex: 1;\n\n    .rank-image {\n      width: 70rpx;\n      height: 70rpx;\n      border-radius: 50%;\n      border: 3px solid #fff;\n      box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\n      transition: transform 0.3s ease;\n\n      .ranking-card:hover &,\n      .card-selected & {\n        transform: scale(1.1);\n      }\n    }\n\n    .rank-name {\n      font-size: 28rpx;\n      color: #333;\n      margin-left: 5rpx;\n    }\n  }\n\n  .rank-actions {\n    display: flex;\n    align-items: center;\n    gap: 5rpx;\n\n    .like-section {\n      display: flex;\n      align-items: center;\n      cursor: pointer;\n      padding: 10rpx 15rpx;\n      border-radius: 50rpx;\n      transition: all 0.3s ease;\n\n      &:hover {\n        background: #f5f5f5;\n      }\n\n      .like-icon {\n        font-size: 28rpx;\n        color: #ff4444;\n        transition: transform 0.3s ease;\n\n        &.like-animation {\n          animation: likePulse 0.5s ease-in-out;\n        }\n      }\n\n      .like-count {\n        font-size: 22rpx;\n        color: #333;\n        margin-left: 5rpx;\n      }\n    }\n\n    .more-options {\n      width: 100%;\n      color: #888;\n      padding: 10rpx 20rpx;\n      border-radius: 50%;\n      transition: all 0.3s ease;\n\n      &:hover {\n        background: #f5f5f5;\n      }\n    }\n  }\n}\n\n.gold {\n  background: linear-gradient(45deg, #ffd700, #ffaa00);\n  box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);\n}\n\n.gold::after {\n  content: 'üëë';\n  position: absolute;\n  font-size: 12px;\n  top: -5px;\n  right: -5px;\n}\n\n.silver {\n  background: linear-gradient(45deg, #c0c0c0, #a9a9a9);\n  box-shadow: 0 0 10px rgba(192, 192, 192, 0.5);\n}\n\n.silver::after {\n  content: '‚≠ê';\n  position: absolute;\n  font-size: 12px;\n  top: -5px;\n  right: -5px;\n}\n\n.bronze {\n  background: linear-gradient(45deg, #cd7f32, #a0522d);\n  box-shadow: 0 0 10px rgba(205, 127, 50, 0.5);\n}\n\n.bronze::after {\n  content: 'üèÖ';\n  position: absolute;\n  font-size: 12px;\n  top: -5px;\n  right: -5px;\n}\n\n@keyframes slideIn {\n  0% {\n    opacity: 0;\n    transform: translateX(50px);\n  }\n  100% {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n@keyframes likePulse {\n  0% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.5);\n  }\n  100% {\n    transform: scale(1);\n  }\n}\n</style>","import MiniProgramPage from 'D:/ÊñáÊ°£ÂíåÁÖßÁâá/‰Ωú‰∏ö/Â§ß‰∏â‰∏ã‰Ωú‰∏ö/ÈõÜ‰∏≠ÂÆû‰π†/XiangVisionCampus/pages/rank/rank.vue'\nwx.createPage(MiniProgramPage)"],"names":["reactive","computed","toRefs","onShow","getSchoolRank","nextTick","uni"],"mappings":";;;;;;AAqDA,UAAM,QAAQA,cAAAA,SAAS;AAAA,MACrB,aAAa,CAAE;AAAA,MACf,eAAe;AAAA,MACf,gBAAgB;AAAA,MAChB,eAAe;AAAA,IACjB,CAAC;AAED,UAAM,WAAWC,cAAQ,SAAC,MAAM;AAC9B,aAAO,CAAC,GAAG,MAAM,WAAW,EAAE,KAAK,CAAC,GAAG,MAAM,EAAE,QAAQ,EAAE,KAAK;AAAA,IAChE,CAAC;AAED,UAAM,EAAE,aAAa,eAAe,gBAAgB,cAAa,IAAKC,cAAAA,OAAO,KAAK;AAElFC,kBAAAA,OAAO,MAAM;AAEX,YAAM,gBAAgB;AAEtBC,4BAAe,EAAC,KAAK,CAAC,QAAQ;AAC5B,cAAM,cAAc,IAAI,KAAK,IAAI,CAAC,MAAM,WAAW;AAAA,UACjD,GAAG;AAAA,UACH,IAAI,KAAK,MAAM;AAAA,UACf,eAAe;AAAA,QAChB,EAAC;AAGFC,sBAAAA,WAAS,MAAM;AACb,gBAAM,gBAAgB;AAAA,QAC5B,CAAK;AAAA,MACL,CAAG;AAAA,IACH,CAAC;AAED,UAAM,aAAa,CAAC,UAAU;AAC5B,YAAM,SAAS,MAAM,YAAY,KAAK,UAAQ,KAAK,OAAO,SAAS,MAAM,KAAK,EAAE,EAAE;AAClF,UAAI,QAAQ;AACV,cAAM,iBAAiB;AACvB,eAAO,SAAS;AAChB,eAAO,gBAAgB;AACvB,mBAAW,MAAM;AACf,iBAAO,gBAAgB;AAAA,QACxB,GAAE,GAAG;AAAA,MACP;AAAA,IACH;AAEA,UAAM,aAAa,CAAC,UAAU;AAC5B,YAAM,gBAAgB,MAAM,kBAAkB,QAAQ,KAAK;AAAA,IAC7D;AAEA,UAAM,wBAAwB,CAAC,SAAS;AACtCC,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,6CAA6C,KAAK,QAAQ;AAAA,MACnE,CAAG;AAAA,IACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvGA,GAAG,WAAW,eAAe;"}